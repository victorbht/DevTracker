{% extends 'core/base.html' %}

{% block content %}
<div class="container-fluid">
    <h2 class="fw-bold text-white mb-4"><i class="fas fa-trophy text-warning me-2"></i>Conquistas Ã‰picas</h2>
    
    <div class="row mb-5">
        <div class="col-12">
            <h4 class="text-white mb-3"><i class="fas fa-dragon text-danger me-2"></i>Medalhas de Boss (Especiais)</h4>
            <div class="row g-4">
                {% for item in boss_medals %}
                <div class="col-sm-6 col-md-4 col-lg-3">
                    <div class="card card-slim border-0 shadow-soft h-100 {% if not item.defeated %}opacity-50{% endif %}">
                        <div class="card-body text-center p-4">
                            {% if item.boss.medal_image %}
                            <div class="mb-3">
                                <img src="/boss_img/{{ item.boss.medal_image }}" alt="{{ item.boss.title }}" class="boss-medal {% if item.defeated %}unlocked{% endif %}">
                            </div>
                            {% else %}
                            <div class="mb-3">
                                <div class="medal-icon {% if item.defeated %}unlocked{% endif %}">
                                    <i class="{{ item.boss.boss_icon }} fa-3x"></i>
                                </div>
                            </div>
                            {% endif %}
                            
                            <h6 class="text-white fw-bold mb-1">{{ item.boss.title }}</h6>
                            
                            {% if item.defeated %}
                            <span class="badge bg-success bg-opacity-25 text-success border border-success">
                                <i class="fas fa-check-circle me-1"></i>Derrotado
                            </span>
                            {% else %}
                            <span class="badge bg-secondary">
                                <i class="fas fa-lock me-1"></i>Bloqueado
                            </span>
                            {% endif %}
                            
                            <div class="mt-3 pt-3 border-top border-secondary border-opacity-25">
                                <small class="text-warning d-block"><i class="fas fa-star me-1"></i>{{ item.boss.xp_reward }} XP</small>
                                <small class="text-warning d-block"><i class="fas fa-coins me-1"></i>{{ item.boss.coin_reward }} Coins</small>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
    
    <div class="row">
        <div class="col-12">
            <h4 class="text-white mb-3"><i class="fas fa-medal text-info me-2"></i>Outras Conquistas</h4>
            <div class="row g-4">
                {% for user_badge in my_badges %}
                <div class="col-sm-6 col-md-4 col-lg-3">
                    <div class="card card-slim border-0 shadow-soft">
                        <div class="card-body text-center p-3">
                            <div class="badge-icon unlocked mb-2">
                                <i class="{{ user_badge.badge.icon_class }} fa-2x"></i>
                            </div>
                            <h6 class="text-white mb-1">{{ user_badge.badge.name }}</h6>
                            <small class="text-muted-2 d-block mb-2">{{ user_badge.badge.description }}</small>
                            <small class="text-success"><i class="fas fa-calendar me-1"></i>{{ user_badge.earned_at|date:"d/m/Y" }}</small>
                        </div>
                    </div>
                </div>
                {% empty %}
                <div class="col-12 text-center text-muted py-4">
                    <i class="fas fa-inbox fa-3x mb-3"></i>
                    <p>Nenhuma conquista ainda. Continue estudando!</p>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>

<style>
    .card-slim { background-color: rgba(26, 26, 36, 0.8); }
    .shadow-soft { box-shadow: 0 4px 12px rgba(0,0,0,0.4); }
    .text-muted-2 { color: #8899a6; }
    
    .boss-medal {
        width: 150px;
        height: 150px;
        object-fit: contain;
        filter: grayscale(100%) brightness(0.5);
        transition: 0.3s;
    }
    .boss-medal.unlocked {
        filter: grayscale(0%) brightness(1);
        animation: glow 2s ease-in-out infinite;
    }
    
    .medal-icon {
        width: 150px;
        height: 150px;
        margin: 0 auto;
        border-radius: 50%;
        border: 4px solid #555;
        display: flex;
        align-items: center;
        justify-content: center;
        background: rgba(255,255,255,0.05);
        color: #666;
    }
    .medal-icon.unlocked {
        border-color: #dc3545;
        background: rgba(220, 53, 69, 0.1);
        color: #dc3545;
        box-shadow: 0 0 30px rgba(220, 53, 69, 0.5);
    }
    
    .badge-icon {
        width: 80px;
        height: 80px;
        margin: 0 auto;
        border-radius: 50%;
        border: 3px solid #555;
        display: flex;
        align-items: center;
        justify-content: center;
        background: rgba(255,255,255,0.05);
        color: #888;
    }
    .badge-icon.unlocked {
        border-color: #22e3a1;
        background: rgba(34, 227, 161, 0.1);
        color: #22e3a1;
        box-shadow: 0 0 15px rgba(34, 227, 161, 0.3);
    }
    
    @keyframes glow {
        0%, 100% { filter: grayscale(0%) brightness(1) drop-shadow(0 0 10px rgba(220, 53, 69, 0.5)); }
        50% { filter: grayscale(0%) brightness(1.2) drop-shadow(0 0 20px rgba(220, 53, 69, 0.8)); }
    }
</style>
{% endblock %}
